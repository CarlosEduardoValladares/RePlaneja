<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="jquery.js"></script>
		<script src="bootstrap4/js/bootstrap.js"></script>
		<link rel="stylesheet" href="bootstrap4/css/bootstrap.css">
		<link rel="stylesheet" href="style.css">
		</link>
		<script>
		
			function comparar(a, b){
			
				a = parseInt(a[0], 10);
				b = parseInt(b[0], 10);
				return( a - b );
			
			}

			function upVote(id_post){

				var total = document.getElementById(id_post).innerHTML;
				total = parseInt(total);
				total++;
				document.getElementById(id_post).innerHTML = total;

			}

			function downVote(id_post){

				var total = document.getElementById(id_post).innerHTML;
				total = parseInt(total);
				total--;
				document.getElementById(id_post).innerHTML = total;

			}

			function orderByMostRecent(){

				var listaPosts = document.getElementsByClassName("postagem");
				var i;
				var size = listaPosts.length;
				var listaVal = [];
				var idsMap = [];
				for (i = 0; i < size; i++){

					var spanPost = listaPosts[i].getElementsByTagName("span");
					var id = spanPost[0].id;
					var stringSize = id.length;
					var lastChar = id.charAt(stringSize-1);
					listaVal.push(lastChar);
					idsMap.push( [lastChar, id] );

				}

				

			}

			function orderByVote(){

				var listaPosts = document.getElementsByClassName("postagem");
				var i;
				var size = listaPosts.length;
				var listaVal = [];
				var indexMap = [];
				for (i = 0; i < size; i++){

					var spanPost = listaPosts[i].getElementsByTagName("span");
					var id = spanPost[0].id;
					var val = spanPost[0].innerText;
					listaVal.push(val);
					indexMap.push( [val, i] );

				}

				indexMap = indexMap.sort(comparar);

				var cpyListPosts = [];
				for(i = 0; i < size; i++){

					cpyListPosts.push(listaPosts[i].innerHTML);				

				}
	
				console.log(indexMap);
	
				var iterador = 0;
				$("#posts").children(".postagem").each(function (){
				
					var post = $(this);
					var index = indexMap[size-1-iterador][1];
					post.html(cpyListPosts[index]);
					iterador++;
				
				});
				

			}

		</script>
		<title>RePlaneja</title>
	</head>
	<body class="bg-secondary text-white index-body">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="nav-link font-weight-bold" href="#">RePlaneja</a>
			<div class="collapse navbar-collapse">
				<form class="form-inline ml-auto">
					<input class="form-control mr-sm-3 input-xxlarge" type="search" placeholder="Search" aria-label="Search">
					<button class="btn btn-outline-success mr-sm-2" type="submit">Search</button>
				</form>
				<a class="nav-link" href="signin.html">Login<span class="sr-only">(current)</span></a>
				<a class="nav-link" href="cadastro.html">Cadastre-se<span class="sr-only">(current)</span></a>
			</div>
		</nav>
		<div class="container bg-dark mt-5 pt-1 pb-1 border rounded">
			<div class="row mt-1">
				<div class="col-sm-6">
					<button class="btn btn-success">+ Adcionar Novo Plano</button>
				</div>
				<div class="col-sm-6 d-flex justify-content-end">
					<label class=" d-flex align-items-end">Ordenar por:</label>
					<button class="btn btn-primary ml-sm-1" onClick="orderByVote();">Mais bem avaliados</button>
					<button class="btn btn-primary ml-sm-1" onClick="orderByMostRecent();">Mais recentes</button>
				</div>
			</div>
			<div id="posts">
				<div class="border mt-4 postagem">
					<div class="row mt-2">
						<div class="ml-5" class="col-sm-5">
							<label>Autor: </label><a class="ml-1" href="">Pessoa1</a>
						</div>
						<div class="col-sm-5 d-flex justify-content-center">
							<h4><a href="post.html?post=post1">Título da Postagem 1</a></h4>
						</div>
						<div class="col-sm-5 d-flex justify-content-end">
							<span id="cont_post_1" class="d-flex align-items-center">0</span>
							<button class="btn btn-success ml-sm-1" onClick="upVote('cont_post_1');">&#11014;</button>
							<button class="btn btn-danger ml-sm-1" onClick="downVote('cont_post_1');">&#11015;</button>
							<button class="btn btn-warning ml-sm-1">Denunciar &#9888;</button>
							<button class="btn btn-danger ml-sm-1">&#128465;</button>
						</div>
					</div>
					<div class="row ml-2 mr-2 mt-2">
						<div>
							<p>Descrição: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas commodo tincidunt ex. Proin sollicitudin velit quis
								dictum efficitur. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nullam vestibulum neque et nulla scelerisque, et condimentum
								mauris iaculis. Sed velit urna, aliquet id laoreet volutpat, interdum ut enim. Donec ornare eget justo at sodales. In tempus eleifend nulla non efficitur. Duis
								consequat tortor lacus, eu hendrerit orci egestas nec. Aliquam vel quam dapibus, eleifend leo ut, fringilla tellus. Praesent mollis ipsum convallis, posuere nisl et,
								suscipit orci. Mauris id nulla id magna lobortis ornare. Nunc aliquam mollis risus, tempus efficitur eros consequat id.
							</p>
						</div>
					</div>
				</div>
				<div class="border mt-4 postagem">
					<div class="row mt-2">
						<div class="ml-5" class="col-sm-5">
							<label>Autor: </label><a class="ml-1" href="">Pessoa2</a>
						</div>
						<div class="col-sm-5 d-flex justify-content-center">
							<h4><a href="post.html?post=post2">Título da Postagem 2</a></h4>
						</div>
						<div class="col-sm-5 d-flex justify-content-end">
							<span id="cont_post_2" class="d-flex align-items-center">0</span>
							<button class="btn btn-success ml-sm-1" onClick="upVote('cont_post_2');">&#11014;</button>
							<button class="btn btn-danger ml-sm-1" onClick="downVote('cont_post_2');">&#11015;</button>
							<button class="btn btn-warning ml-sm-1">Denunciar &#9888;</button>
							<button class="btn btn-danger ml-sm-1">&#128465;</button>
						</div>
					</div>
					<div class="row ml-2 mr-2 mt-2">
						<div>
							<p>Descrição: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas commodo tincidunt ex. Proin sollicitudin velit quis
								dictum efficitur. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nullam vestibulum neque et nulla scelerisque, et condimentum
								mauris iaculis. Sed velit urna, aliquet id laoreet volutpat, interdum ut enim. Donec ornare eget justo at sodales. In tempus eleifend nulla non efficitur. Duis
								consequat tortor lacus, eu hendrerit orci egestas nec. Aliquam vel quam dapibus, eleifend leo ut, fringilla tellus. Praesent mollis ipsum convallis, posuere nisl et,
								suscipit orci. Mauris id nulla id magna lobortis ornare. Nunc aliquam mollis risus, tempus efficitur eros consequat id.
							</p>
						</div>
					</div>
				</div>
				<div class="border mt-4 postagem">
					<div class="row mt-2">
						<div class="ml-5" class="col-sm-5">
							<label>Autor: </label><a class="ml-1" href="">Pessoa3</a>
						</div>
						<div class="col-sm-5 d-flex justify-content-center">
							<h4><a href="post.html?post=post3">Título da Postagem 3</a></h4>
						</div>
						<div class="col-sm-5 d-flex justify-content-end">
							<span id="cont_post_3" class="d-flex align-items-center">0</span>
							<button class="btn btn-success ml-sm-1" onClick="upVote('cont_post_3');">&#11014;</button>
							<button class="btn btn-danger ml-sm-1" onClick="downVote('cont_post_3');">&#11015;</button>
							<button class="btn btn-warning ml-sm-1">Denunciar &#9888;</button>
							<button class="btn btn-danger ml-sm-1">&#128465;</button>
						</div>
					</div>
					<div class="row ml-2 mr-2 mt-2">
						<div>
							<p>Descrição: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas commodo tincidunt ex. Proin sollicitudin velit quis
								dictum efficitur. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nullam vestibulum neque et nulla scelerisque, et condimentum
								mauris iaculis. Sed velit urna, aliquet id laoreet volutpat, interdum ut enim. Donec ornare eget justo at sodales. In tempus eleifend nulla non efficitur. Duis
								consequat tortor lacus, eu hendrerit orci egestas nec. Aliquam vel quam dapibus, eleifend leo ut, fringilla tellus. Praesent mollis ipsum convallis, posuere nisl et,
								suscipit orci. Mauris id nulla id magna lobortis ornare. Nunc aliquam mollis risus, tempus efficitur eros consequat id.
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
